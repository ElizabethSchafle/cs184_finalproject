<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
  body {
    padding: 100px;
    width: 1000px;
    margin: auto;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
</style>
<title>Mesh Downsampling and Remeshing</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="icon" href="images/simplify_and_remesh_cow.png">
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>


<body>

<h1 align="middle">CS 184 Final Project: Mesh Downsampling and Remeshing</h1>
<h2 align="middle">Brian Ho, Elizabeth Schafle, Jose Chavez</h2>

<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/simplify_and_remesh_cow.png" align="middle" width="390px"/>
        <img src="images/simplify_peter_2.png" align="middle" width="500px"/>
      </td>
    </tr>
  </table>
</div>

<h2 align="left">Final Report</h2>
<h3 align="left">Abstract</h3>
<p>Our project is about downsampling and remeshing triangle meshes. The goal for downsampling is to reduce the number
  of triangles used to represent the shape of the mesh. The main difficulty is reducing the triangles, which is done
  with edge collapse. Edge collapse is then used in Quadric Error Metric downsampling. </p>
<p>
  The goal for isotropic remeshing is finding a better, discrete representation of a mesh with triangles of equal edge
  length. The main difficulty is adjusting edge lengths which is done by calculating new positions for vertices.
</p>
<h3 align="left">Technical Approach</h3>

<h4>
  Edge Collapse:
</h4>
<p>This algorithm is arguably the most cruicial function for the project, utilized in both mesh downsampling and
  remeshing. What edge collapse does is take a selected edge, and gets rid of it as well as merge the two vertices.
  Our algorithm is as follows: </p>
<ol>
  <li>Create a new vertex as the midpoint of </li>
  <li>Then this</li>
  <li>Afterwards this</li>
</ol>
<h4>
  Quadric error simplification:
</h4>
<h4>
  Isotropic remeshing:
</h4>
<p>
  we implemented incremental remeshing to create a more topologically accurate  and regular mesh. We did this through
  enforcing a more regular edge length, improving mesh valence, and centering vertices. For this algorithm, we referenced
  this lecture from CMU <a href="http://www.hao-li.com/cs599-ss2015/slides/Lecture09.1.pdf">Slides</a>
</p>
<p>
  The first part of this algorithm, we specified a length L to be the average length of all of the current edges
  in the mesh. Then, we defined values L_max = 4/3 * L and L_min = 4/5 * L. Then, using L_max, we split all edges longer
  than l_max, ensuring no edges would be too long, and we collapsed any edges that were less than L_min
</p>


<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh1.png" align="middle" width="300px"/>
        <img src="images/remesh2.png" align="middle" width="542px"/>
      </td>
    </tr>
  </table>
</div>
<p>Enforcing edge lengths resulted in the following change from the original mesh</p>
<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh7.png" align="middle" width="500px"/>
      </td>
    </tr>
  </table>
</div>

<p>
  The next major portion of this algorithm was enforcing optimal valence of the vertices, in other words, we made sure
  that most of the edges in the mesh had no vertex with more or less than 6 incident edges. To do this, we
  iterated through all of the edges in the mesh. For each edge, we first collected all of the vertices that would be involved
  in the flipping of the current edge, A, B, C, and D:
</p>
<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh3.png" align="middle" width="200px"/>
      </td>
    </tr>
  </table>
</div>

<p>
  Then, using these vertices we used the following formula to compute the total error in the valence of the
  vertices involved with the edge flip:
</p>
<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/resmesh4.png" align="middle" width="400px"/>
      </td>
    </tr>
    <tr>
      <td>
        <img src="images/remesh5.png" align="middle" width="500px"/>
      </td>
    </tr>
  </table>
</div>
<p>
  Then, with a slightly edited version of this same formula, we calculated the valence error of these vertices if
  we were to flip the current edge. If the predicted valence error was less than the current valence error,
  we flipped the edge.
</p>
<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh6.png" align="middle" width="500px"/>
      </td>
    </tr>
  </table>
</div>
<p>
  Enforcing an average edge length between average edge length resulted in the following change from the
  previous result:
</p>
<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh8.png" align="middle" width="500px"/>
      </td>
    </tr>
  </table>
</div>
<p>
  The final portion of this algorithm was local spring relaxation, or more simply, moving vertices towards
  the centroid of their respective polygons. We did this by first calculating the centroid for each vertex,
  using the average position of its incident vertices:
</p>
<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh9.png" align="middle" width="500px"/>
      </td>
    </tr>
  </table>
</div>
<p>
  Next, after computing the centroid of each vertex in the mesh, we iterated through the vertices of the mesh
  and using the vertex normal and centroid, created a difference vector with which to transform the current
  position of the vertex, but we multiply this vector by 4/5 in order to reduce the total distance of position
  change to preserve topology and reduce errors.
</p>
<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh10.png" align="middle" width="500px"/>
      </td>
    </tr>
  </table>
</div>
<p>this final computation resulted in the following improvement to the mesh:</p>

<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh11.png" align="middle" width="500px"/>
      </td>
    </tr>
  </table>
</div>

<p>
  And finally, a comparision of the final result to the original mesh:
</p>


<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="images/remesh12.png" align="middle" width="700px"/>
      </td>
    </tr>
  </table>
</div>

<h3 align="left">Debugging Horrors</h3>
<h4>
  Edge Collapse:
</h4>
<p>bad</p>
<h4>
  Quadric error simplification:
</h4>
<p>bad</p>
<h4>
  Isotropic remeshing:
</h4>
<p>bad</p>

<h3 align="left">Results Gallery</h3>
<p><a href="gallery.html">Click here for results gallery</a></p>

<h3 align="left">Important external links</h3>
<p><a href="https://www.youtube.com/watch?v=9MOaKqvEs-o&feature=youtu.be">Video</a></p>
<p><a href="https://docs.google.com/document/d/1B1IANrvQMf2fI0fmDcV-nWVe7zsE1OBrSXtUwJJR6Uc/edit?usp=sharing">Project Proposal</a></p>
<p><a href="https://docs.google.com/presentation/d/1GfDvUWTa2WCMgL4leKjg9gH9aSEkm-Zr_claGWy9D4I/edit?usp=sharing">Slides</a></p>
<p><a href="milestone.html">Milestone webpage</a></p>

<h3 align="left">Resources</h3>


</body>
</html>
